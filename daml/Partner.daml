module Partner where

import DA.Validation
import Bet

template Partner 
  with
    creator : Party
    partnerId : Int
  where
    signatory creator

    key (creator, partnerId) : (Party, Int)
    maintainer key._1

    nonconsuming choice ValidatePartner : Validation Text Bet
      with
        bet : Bet
      controller bet.bettor 
      do
        if bet.partnerId <= 0
        then pure $ invalid "Partner ID cannot be less than zero"
        else pure $ ok bet
